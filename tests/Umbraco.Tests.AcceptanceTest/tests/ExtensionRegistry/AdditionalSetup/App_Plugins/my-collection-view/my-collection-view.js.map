{"version":3,"file":"my-collection-view.js","sources":["../../my-collection-view/src/my-collection-view.ts"],"sourcesContent":["import { css, customElement, html, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { UMB_DOCUMENT_COLLECTION_CONTEXT } from '@umbraco-cms/backoffice/document';\r\nimport type { UmbDocumentCollectionItemModel } from '@umbraco-cms/backoffice/document';\r\nimport type { UmbCollectionColumnConfiguration } from '@umbraco-cms/backoffice/collection';\r\n\r\n@customElement('my-document-table-collection-view')\r\nexport class MyDocumentTableCollectionViewElement extends UmbLitElement {\r\n\r\n\t@state() private _columns: Array<{ name: string; alias: string; align?: string }> = [];\r\n\t@state() private _items?: Array<UmbDocumentCollectionItemModel> = [];\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(UMB_DOCUMENT_COLLECTION_CONTEXT, (collectionContext) => {\r\n\t\t\tcollectionContext?.setupView(this);\r\n\r\n\t\t\tthis.observe(collectionContext?.userDefinedProperties, (props) => {\r\n\t\t\t\tthis.#createColumns(props);\r\n\t\t\t});\r\n\r\n\t\t\tthis.observe(collectionContext?.items, (items) => {\r\n\t\t\t\tthis._items = items;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t#createColumns(userProps: Array<UmbCollectionColumnConfiguration> = []) {\r\n\t\tconst baseCols = [\r\n\t\t\t{ name: 'Name', alias: 'name' },\r\n\t\t\t{ name: 'State', alias: 'state' },\r\n\t\t];\r\n\t\tconst userCols = userProps.map((p) => ({\r\n\t\t\tname: p.nameTemplate ?? p.alias,\r\n\t\t\talias: p.alias,\r\n\t\t}));\r\n\t\tthis._columns = [...baseCols, ...userCols, { name: '', alias: 'entityActions', align: 'right' }];\r\n\t}\r\n\r\n\toverride render() {\r\n        if (this._items === undefined) return html`<p>Not found...</p>`;\r\n\t\treturn html`\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t${this._columns.map((col) => html`<th style=\"text-align:${col.align ?? 'left'}\">${col.name}</th>`)}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t${this._items.map(\r\n\t\t\t(item) => html`\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t${this._columns.map((col) => {\r\n\t\t\t\tswitch (col.alias) {\r\n\t\t\t\t\tcase 'name':\r\n\t\t\t\t\t\treturn html`<td><a href=\"#\">${item.variants[0].name}</a></td>`;\r\n\t\t\t\t\tcase 'entityActions':\r\n\t\t\t\t\t\treturn html`<td style=\"text-align:right;\">â‹®</td>`;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconst val = item.values.find((v) => v.alias === col.alias)?.value ?? '';\r\n\t\t\t\t\t\treturn html`<td>${val}</td>`;\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t`\r\n\t\t)}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = css`\r\n\t\t:host {\r\n\t\t\tdisplay: block;\r\n\t\t\twidth: 100%;\r\n\t\t\toverflow-x: auto;\r\n\t\t\tfont-family: sans-serif;\r\n\t\t}\r\n\t\ttable {\r\n\t\t\twidth: 100%;\r\n\t\t\tborder-collapse: collapse;\r\n\t\t}\r\n\t\tth,\r\n\t\ttd {\r\n\t\t\tpadding: 6px 10px;\r\n\t\t\tborder: 1px solid #ddd;\r\n\t\t\twhite-space: nowrap;\r\n\t\t}\r\n\t\tth {\r\n\t\t\tbackground: #f8f8f8;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t\ta {\r\n\t\t\tcolor: var(--uui-color-interactive, #0366d6);\r\n\t\t\ttext-decoration: none;\r\n\t\t}\r\n\t\ta:hover {\r\n\t\t\ttext-decoration: underline;\r\n\t\t}\r\n\t`;\r\n}\r\n\r\nexport default MyDocumentTableCollectionViewElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'my-document-table-collection-view': MyDocumentTableCollectionViewElement;\r\n\t}\r\n}\r\n"],"names":["_MyDocumentTableCollectionViewElement_instances","createColumns_fn","MyDocumentTableCollectionViewElement","UmbLitElement","__privateAdd","UMB_DOCUMENT_COLLECTION_CONTEXT","collectionContext","props","__privateMethod","items","html","col","item","val","v","userProps","baseCols","userCols","p","css","__decorateClass","state","customElement","MyDocumentTableCollectionViewElement$1"],"mappings":";;;;;;;;;8OAAAA,GAAAC;AAOO,IAAMC,IAAN,cAAmDC,EAAc;AAAA,EAKvE,cAAc;AACb,UAAA,GANKC,EAAA,MAAAJ,CAAA,GAEG,KAAQ,WAAmE,CAAA,GAC3E,KAAQ,SAAiD,CAAA,GAKjE,KAAK,eAAeK,GAAiC,CAACC,MAAsB;AAC3E,MAAAA,GAAmB,UAAU,IAAI,GAEjC,KAAK,QAAQA,GAAmB,uBAAuB,CAACC,MAAU;AACjE,QAAAC,EAAA,MAAKR,MAAL,KAAA,MAAoBO,CAAA;AAAA,MACrB,CAAC,GAED,KAAK,QAAQD,GAAmB,OAAO,CAACG,MAAU;AACjD,aAAK,SAASA;AAAA,MACf,CAAC;AAAA,IACF,CAAC;AAAA,EACF;AAAA,EAcS,SAAS;AACX,WAAI,KAAK,WAAW,SAAkBC,yBACrCA;AAAA;AAAA;AAAA;AAAA,QAID,KAAK,SAAS,IAAI,CAACC,MAAQD,0BAA6BC,EAAI,SAAS,MAAM,KAAKA,EAAI,IAAI,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA,OAIjG,KAAK,OAAO;AAAA,MAChB,CAACC,MAASF;AAAA;AAAA,UAEH,KAAK,SAAS,IAAI,CAACC,MAAQ;AACjC,gBAAQA,EAAI,OAAA;AAAA,UACX,KAAK;AACJ,mBAAOD,oBAAuBE,EAAK,SAAS,CAAC,EAAE,IAAI;AAAA,UACpD,KAAK;AACJ,mBAAOF;AAAA,UACR;AACC,kBAAMG,IAAMD,EAAK,OAAO,KAAK,CAACE,MAAMA,EAAE,UAAUH,EAAI,KAAK,GAAG,SAAS;AACrE,mBAAOD,QAAWG,CAAG;AAAA,QAAA;AAAA,MAExB,CAAC,CAAC;AAAA;AAAA;AAAA,IAAA,CAGF;AAAA;AAAA;AAAA;AAAA,EAIF;AA+BD;AA9FOb,IAAA,oBAAA,QAAA;AAqBNC,IAAc,SAACc,IAAqD,IAAI;AACvE,QAAMC,IAAW;AAAA,IAChB,EAAE,MAAM,QAAQ,OAAO,OAAA;AAAA,IACvB,EAAE,MAAM,SAAS,OAAO,QAAA;AAAA,EAAQ,GAE3BC,IAAWF,EAAU,IAAI,CAACG,OAAO;AAAA,IACtC,MAAMA,EAAE,gBAAgBA,EAAE;AAAA,IAC1B,OAAOA,EAAE;AAAA,EAAA,EACR;AACF,OAAK,WAAW,CAAC,GAAGF,GAAU,GAAGC,GAAU,EAAE,MAAM,IAAI,OAAO,iBAAiB,OAAO,SAAS;AAChG;AA/BYf,EAiEI,SAASiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA/DRC,EAAA;AAAA,EAAhBC,EAAA;AAAM,GAFKnB,EAEK,WAAA,YAAA,CAAA;AACAkB,EAAA;AAAA,EAAhBC,EAAA;AAAM,GAHKnB,EAGK,WAAA,UAAA,CAAA;AAHLA,IAANkB,EAAA;AAAA,EADNE,EAAc,mCAAmC;AAAA,GACrCpB,CAAA;AAgGb,MAAAqB,IAAerB;"}