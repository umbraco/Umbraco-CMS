<div class="umb-block-grid-area-allowance-editor">

    <umb-load-indicator ng-if="vm.loading"></umb-load-indicator>

    <div ng-show="vm.loading !== true" class="__list" ng-class="{'--disabled': vm.disabled}">

        
        <div ng-repeat="allowance in vm.model track by allowance.$key" class="umb-block-grid-area-allowance-editor__entry">
            <select 
                ng-model="allowance.elementTypeKey"
                ng-disabled="vm.disabled"
                required
            >
                <option ng-repeat="blockType in vm.allBlockTypes" ng-init="elementType = vm.getElementTypeByKey(blockType.contentElementTypeKey)" value="{{elementType.key}}">{{elementType.name}}</option>
            </select>
            <input 
                type="number"
                ng-disabled="vm.disabled"
                name="label"
                min="0"
                ng-max="model.value.max"
                placeholder="0"
                ng-model="allowance.minAllowed"
                fix-number
                style="width:80px"/>
            <span>–</span>
            <input 
                type="number"
                ng-disabled="vm.disabled"
                name="label"
                ng-model="allowance.maxAllowed"
                placeholder="∞"
                ng-min="model.value.min || 0"
                fix-number
                style="width:80px"/>
            <button 
                type="button" 
                class="btn-reset umb-outline"
                localize="title"
                title="actions_delete"
                ng-click="vm.deleteAllowance(allowance);"
                ng-disabled="vm.disabled">
                <umb-icon icon="icon-trash" class="icon"></umb-icon>
                <span class="sr-only">
                    <localize key="actions_delete">Delete</localize>
                </span>
            </button>
        </div>
    </div>

    <button
        type="button"
        ng-disabled="vm.disabled"
        class="btn-reset umb-block-grid-area-editor__create-button umb-outline"
        ng-click="vm.onNewAllowanceClick()">
        <localize key="general_add">Add</localize>
    </button>

</div>



