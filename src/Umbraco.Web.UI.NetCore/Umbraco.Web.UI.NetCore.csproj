<Project Sdk="Microsoft.NET.Sdk.Web">

    <PropertyGroup>
        <TargetFramework>netcoreapp3.1</TargetFramework>
        <RootNamespace>Umbraco.Web.UI.NetCore</RootNamespace>
        <LangVersion>latest</LangVersion>
    </PropertyGroup>
    <ItemGroup>
      <ProjectReference Include="..\Umbraco.Examine.Lucene\Umbraco.Examine.Lucene.csproj" />
      <ProjectReference Include="..\Umbraco.PublishedCache.NuCache\Umbraco.PublishedCache.NuCache.csproj" />
      <ProjectReference Include="..\Umbraco.Web.BackOffice\Umbraco.Web.BackOffice.csproj" />
      <ProjectReference Include="..\Umbraco.Web.Common\Umbraco.Web.Common.csproj" />
      <ProjectReference Include="..\Umbraco.Web.Website\Umbraco.Web.Website.csproj" />
    </ItemGroup>

    <ItemGroup>
      <Folder Include="Umbraco" />
      <Folder Include="Views\" />
      <Folder Include="wwwroot\Media" />
      <Folder Include="wwwroot\Umbraco\views\install" />
    </ItemGroup>

    <ItemGroup>
        <Compile Remove="App_Data\**" />
    </ItemGroup>

    <ItemGroup>
        <EmbeddedResource Remove="App_Data\**" />
    </ItemGroup>

    <ItemGroup>
        <None Remove="App_Data\**" />
        <None Include="Config\tinyMceConfig.Release.config">
          <DependentUpon>tinyMceConfig.config</DependentUpon>
          <SubType>Designer</SubType>
        </None>
        <None Include="Config\umbracoSettings.Release.config">
          <DependentUpon>umbracoSettings.config</DependentUpon>
          <SubType>Designer</SubType>
        </None>
    </ItemGroup>

    <ItemGroup>
        <Content Remove="App_Data\**" />
        <Content Remove="wwwroot\Umbraco\views\install\machinekey.html" />
        <Content Remove="wwwroot\Umbraco\views\install\permissionsreport.html" />
        <Content Remove="wwwroot\Umbraco\views\install\starterkit.html" />
        <Content Remove="wwwroot\Umbraco\views\install\upgrade.html" />
        <Content Remove="wwwroot\Umbraco\views\install\user.html" />
        <Content Remove="wwwroot\Umbraco\views\install\version7upgradereport.html" />
        <Content Remove="wwwroot\Umbraco\views\install\continueinstall.html" />
        <Content Remove="wwwroot\Umbraco\views\install\database.html" />
        <Content Remove="wwwroot\Umbraco\views\install\error.html" />
        <Content Update="Areas\UmbracoInstall\Views\Install\Index.cshtml">
          <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
          <CopyToPublishDirectory>PreserveNewest</CopyToPublishDirectory>
        </Content>
        <Content Update="Config\tinyMceConfig.config">
          <SubType>Designer</SubType>
        </Content>
        <Content Update="Config\umbracoSettings.config">
          <SubType>Designer</SubType>
        </Content>
        <Content Remove="wwwroot\Web.config" />
        <Content Update="Views\MacroPartials\Gallery.cshtml">
          <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
          <CopyToPublishDirectory>PreserveNewest</CopyToPublishDirectory>
        </Content>
        <Content Update="Views\Root.cshtml">
          <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
          <CopyToPublishDirectory>PreserveNewest</CopyToPublishDirectory>
        </Content>
    </ItemGroup>

    <ItemGroup>
      <PackageReference Include="Microsoft.AspNetCore.Mvc.NewtonsoftJson" Version="3.1.3" />
        <!-- TODO: remove the reference to System.Configuration.ConfigurationManager when Examine/lucene dont need it-->
        <PackageReference Include="System.Configuration.ConfigurationManager" Version="4.7.0" />
    </ItemGroup>

    <ItemGroup>
      <Content Remove="Config\serilog.Release.config" />
      <Content Remove="Config\serilog.user.Release.config" />
    </ItemGroup>

    <ItemGroup>
      <None Remove="Config\logviewer.searches.config.js" />
    </ItemGroup>

    <ItemGroup>
      <Content Include="Config\grid.editors.config.js" />
      <Content Include="Config\logviewer.searches.config.js" />
    </ItemGroup>

    <ItemGroup>
      <None Include="Config\serilog.Release.config">
        <SubType>Designer</SubType>
        <DependentUpon>serilog.config</DependentUpon>
      </None>
      <None Include="Config\serilog.user.Release.config">
        <SubType>Designer</SubType>
        <DependentUpon>serilog.user.config</DependentUpon>
      </None>
    </ItemGroup>

    <ItemGroup>
      <Content Update="Config\serilog.config">
        <SubType>Designer</SubType>
      </Content>
      <Content Update="Config\serilog.user.config">
        <SubType>Designer</SubType>
      </Content>
    </ItemGroup>

</Project>
