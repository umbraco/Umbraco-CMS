(function(){'use strict';angular.module('umbraco.resources',[]);'use strict';function authResource($q,$http,umbRequestHelper,angularHelper){return{get2FAProviders:function get2FAProviders(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','Get2FAProviders')),'Could not retrive two factor provider info');},send2FACode:function send2FACode(provider){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostSend2FACode'),Utilities.toJson(provider)),'Could not send code');},verify2FACode:function verify2FACode(provider,code){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostVerify2FACode'),{code:code,provider:provider}),'Could not verify code');},performLogin:function performLogin(username,password){if(!username||!password){return $q.reject({errorMsg:'Username or password cannot be empty'});}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostLogin'),{username:username,password:password}),'Login failed for user '+username);},getCurrentInvitedUser:function getCurrentInvitedUser(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','GetCurrentInvitedUser')),'Failed to verify invite');},performRequestPasswordReset:function performRequestPasswordReset(email){if(!email){return $q.reject({errorMsg:'Email address cannot be empty'});}
var emailRegex=/\S+@\S+\.\S+/;if(!emailRegex.test(email)){return $q.reject({errorMsg:'Email address is not valid'});}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostRequestPasswordReset'),{email:email}),'Request password reset failed for email '+email);},performValidatePasswordResetCode:function performValidatePasswordResetCode(userId,resetCode){if(!userId){return $q.reject({errorMsg:'User Id cannot be empty'});}
if(!resetCode){return $q.reject({errorMsg:'Reset code cannot be empty'});}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostValidatePasswordResetCode'),{userId:userId,resetCode:resetCode}),'Password reset code validation failed for userId '+userId+', code'+resetCode);},getPasswordConfig:function getPasswordConfig(userId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','GetPasswordConfig',{userId:userId})),'Failed to retrieve membership provider config');},performSetPassword:function performSetPassword(userId,password,confirmPassword,resetCode){if(userId===undefined||userId===null){return $q.reject({errorMsg:'User Id cannot be empty'});}
if(!password){return $q.reject({errorMsg:'Password cannot be empty'});}
if(password!==confirmPassword){return $q.reject({errorMsg:'Password and confirmation do not match'});}
if(!resetCode){return $q.reject({errorMsg:'Reset code cannot be empty'});}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostSetPassword'),{userId:userId,password:password,resetCode:resetCode}),'Password reset code validation failed for userId '+userId);},unlinkLogin:function unlinkLogin(loginProvider,providerKey){if(!loginProvider||!providerKey){return $q.reject({errorMsg:'loginProvider or providerKey cannot be empty'});}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostUnLinkLogin'),{loginProvider:loginProvider,providerKey:providerKey}),'Unlinking login provider failed');},performLogout:function performLogout(){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','PostLogout')));},getCurrentUser:function getCurrentUser(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','GetCurrentUser')),'Server call failed for getting current user');},getCurrentUserLinkedLogins:function getCurrentUserLinkedLogins(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','GetCurrentUserLinkedLogins')),'Server call failed for getting current users linked logins');},isAuthenticated:function isAuthenticated(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','IsAuthenticated')),{success:function success(data,status,headers,config){if(data===false||data==='false'){return $q.reject('User is not logged in');}
return data;},error:function error(data,status,headers,config){return{errorMsg:'Server call failed for checking authentication',data:data,status:status};}});},getRemainingTimeoutSeconds:function getRemainingTimeoutSeconds(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('authenticationApiBaseUrl','GetRemainingTimeoutSeconds')),'Server call failed for checking remaining seconds');}};}
angular.module('umbraco.resources').factory('authResource',authResource);'use strict';function codefileResource($q,$http,umbDataFormatter,umbRequestHelper,localizationService){return{getByPath:function getByPath(type,virtualpath){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','GetByPath',[{type:type},{virtualPath:virtualpath}])),'Failed to retrieve data for '+type+' from virtual path '+virtualpath);},getByAlias:function getByAlias(alias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateApiBaseUrl','GetByAlias',[{alias:alias}])),'Failed to retrieve data for template with alias: '+alias);},deleteByPath:function deleteByPath(type,virtualpath){var promise=localizationService.localize('codefile_deleteItemFailed',[virtualpath]);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','Delete',[{type:type},{virtualPath:virtualpath}])),promise);},save:function save(codeFile){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','PostSave'),codeFile),'Failed to save data for code file '+codeFile.virtualPath);},getSnippets:function getSnippets(fileType){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','GetSnippets?type='+fileType)),'Failed to get snippet for'+fileType);},getScaffold:function getScaffold(type,id,snippetName){var queryString='?type='+type+'&id='+id;if(snippetName){queryString+='&snippetName='+snippetName;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','GetScaffold'+queryString)),'Failed to get scaffold for'+type);},createContainer:function createContainer(type,parentId,name){var key='codefile_createFolderFailedBy'+(isNaN(parseInt(parentId))?'Name':'Id');var promise=localizationService.localize(key,[parentId]);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','PostCreateContainer',{type:type,parentId:parentId,name:encodeURIComponent(name)})),promise);},interpolateStylesheetRules:function interpolateStylesheetRules(content,rules){var payload={content:content,rules:rules};return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','PostInterpolateStylesheetRules'),payload),'Failed to interpolate sheet rules');},extractStylesheetRules:function extractStylesheetRules(content){var payload={content:content,rules:null};return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('codeFileApiBaseUrl','PostExtractStylesheetRules'),payload),'Failed to extract style sheet rules');}};}
angular.module('umbraco.resources').factory('codefileResource',codefileResource);'use strict';function contentResource($q,$http,umbDataFormatter,umbRequestHelper){function saveContentItem(content,action,files,restApiUrl,showNotifications){return umbRequestHelper.postSaveContent({restApiUrl:restApiUrl,content:content,action:action,files:files,showNotifications:showNotifications,dataFormatter:function dataFormatter(c,a){return umbDataFormatter.formatContentPostData(c,a);}});}
return{allowsCultureVariation:function allowsCultureVariation(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','AllowsCultureVariation')),'Failed to retrieve variant content types');},savePermissions:function savePermissions(saveModel){if(!saveModel){throw'saveModel cannot be null';}
if(!saveModel.contentId){throw'saveModel.contentId cannot be null';}
if(!saveModel.permissions){throw'saveModel.permissions cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSaveUserGroupPermissions'),saveModel),'Failed to save permissions');},getRecycleBin:function getRecycleBin(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetRecycleBin')),'Failed to retrieve data for content recycle bin');},sort:function sort(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.sortedIds){throw'args.sortedIds cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSort'),{parentId:args.parentId,idSortOrder:args.sortedIds}),'Failed to sort content');},move:function move(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostMove'),{parentId:args.parentId,id:args.id},{responseType:'text'}),'Failed to move content');},copy:function copy(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostCopy'),args,{responseType:'text'}),'Failed to copy content');},unpublish:function unpublish(id,cultures){if(!id){throw'id cannot be null';}
if(!cultures){cultures=[];}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostUnpublish'),{id:id,cultures:cultures}),'Failed to publish content with id '+id);},getCultureAndDomains:function getCultureAndDomains(id){if(!id){throw'id cannot be null';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetCultureAndDomains',{id:id})),'Failed to retreive culture and hostnames for '+id);},saveLanguageAndDomains:function saveLanguageAndDomains(model){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSaveLanguageAndDomains'),model));},emptyRecycleBin:function emptyRecycleBin(){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','EmptyRecycleBin')),'Failed to empty the recycle bin');},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete item '+id);},deleteBlueprint:function deleteBlueprint(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','DeleteBlueprint',[{id:id}])),'Failed to delete blueprint '+id);},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetById',{id:id})),'Failed to retrieve data for content id '+id).then(function(result){return $q.when(umbDataFormatter.formatContentGetData(result));});},getBlueprintById:function getBlueprintById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetBlueprintById',{id:id})),'Failed to retrieve data for content id '+id).then(function(result){return $q.when(umbDataFormatter.formatContentGetData(result));});},getNotifySettingsById:function getNotifySettingsById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetNotificationOptions',{contentId:id})),'Failed to retrieve data for content id '+id);},setNotifySettingsById:function setNotifySettingsById(id,options){if(!id){throw'contentId cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostNotificationOptions',{contentId:id,notifyOptions:options})),'Failed to set notify settings for content id '+id);},getByIds:function getByIds(ids){var idQuery='';_.each(ids,function(item){idQuery+='ids='+item+'&';});return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetByIds',idQuery)),'Failed to retrieve data for content with multiple ids').then(function(result){_.each(result,function(r){umbDataFormatter.formatContentGetData(r);});return $q.when(result);});},getScaffold:function getScaffold(parentId,alias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetEmpty',{contentTypeAlias:alias,parentId:parentId})),'Failed to retrieve data for empty content item type '+alias).then(function(result){return $q.when(umbDataFormatter.formatContentGetData(result));});},getScaffoldByKey:function getScaffoldByKey(parentId,contentTypeKey){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetEmptyByKey',{contentTypeKey:contentTypeKey,parentId:parentId})),'Failed to retrieve data for empty content item id '+contentTypeKey).then(function(result){return $q.when(umbDataFormatter.formatContentGetData(result));});},getBlueprintScaffold:function getBlueprintScaffold(parentId,blueprintId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetEmpty',{blueprintId:blueprintId,parentId:parentId})),'Failed to retrieve blueprint for id '+blueprintId).then(function(result){return $q.when(umbDataFormatter.formatContentGetData(result));});},getNiceUrl:function getNiceUrl(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetNiceUrl',{id:id}),{responseType:'text'}),'Failed to retrieve url for id:'+id);},getChildren:function getChildren(parentId,options){var defaults={includeProperties:[],pageSize:0,pageNumber:0,filter:'',orderDirection:'Ascending',orderBy:'SortOrder',orderBySystemField:true,cultureName:''};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
function toBool(v){if(Utilities.isNumber(v)){return v>0;}
if(Utilities.isString(v)){return v==='true';}
if(typeof v==='boolean'){return v;}
return false;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetChildren',{id:parentId,includeProperties:_.pluck(options.includeProperties,'alias').join(','),pageNumber:options.pageNumber,pageSize:options.pageSize,orderBy:options.orderBy,orderDirection:options.orderDirection,orderBySystemField:toBool(options.orderBySystemField),filter:options.filter,cultureName:options.cultureName})),'Failed to retrieve children for content item '+parentId);},getDetailedPermissions:function getDetailedPermissions(contentId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetDetailedPermissions',{contentId:contentId})),'Failed to retrieve permissions for content item '+contentId);},save:function save(content,isNew,files,showNotifications){var endpoint=umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSave');return saveContentItem(content,'save'+(isNew?'New':''),files,endpoint,showNotifications);},saveBlueprint:function saveBlueprint(content,isNew,files,showNotifications){var endpoint=umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSaveBlueprint');return saveContentItem(content,'save'+(isNew?'New':''),files,endpoint,showNotifications);},publish:function publish(content,isNew,files,showNotifications){var endpoint=umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSave');return saveContentItem(content,'publish'+(isNew?'New':''),files,endpoint,showNotifications);},publishWithDescendants:function publishWithDescendants(content,isNew,force,files,showNotifications){var endpoint=umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSave');var action='publishWithDescendants';if(force===true){action+='Force';}
return saveContentItem(content,action+(isNew?'New':''),files,endpoint,showNotifications);},sendToPublish:function sendToPublish(content,isNew,files,showNotifications){var endpoint=umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSave');return saveContentItem(content,'sendPublish'+(isNew?'New':''),files,endpoint,showNotifications);},saveSchedule:function saveSchedule(content,isNew,files,showNotifications){var endpoint=umbRequestHelper.getApiUrl('contentApiBaseUrl','PostSave');return saveContentItem(content,'schedule'+(isNew?'New':''),files,endpoint,showNotifications);},publishById:function publishById(id){if(!id){throw'id cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostPublishById',[{id:id}])),'Failed to publish content with id '+id);},createBlueprintFromContent:function createBlueprintFromContent(contentId,name){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','CreateBlueprintFromContent',{contentId:contentId,name:name})),'Failed to create blueprint from content with id '+contentId);},getRollbackVersions:function getRollbackVersions(contentId,culture){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetRollbackVersions',{contentId:contentId,culture:culture})),'Failed to get rollback versions for content item with id '+contentId);},getRollbackVersion:function getRollbackVersion(versionId,culture){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetRollbackVersion',{versionId:versionId,culture:culture})),'Failed to get version for content item with id '+versionId);},rollback:function rollback(contentId,versionId,culture){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostRollbackContent',{contentId:contentId,versionId:versionId,culture:culture})),'Failed to roll back content item with id '+contentId);},getPublicAccess:function getPublicAccess(contentId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentApiBaseUrl','GetPublicAccess',{contentId:contentId})),'Failed to get public access for content item with id '+contentId);},updatePublicAccess:function updatePublicAccess(contentId,groups,usernames,loginPageId,errorPageId){var publicAccess={contentId:contentId,loginPageId:loginPageId,errorPageId:errorPageId};if(Utilities.isArray(groups)&&groups.length){publicAccess.groups=groups;}else if(Utilities.isArray(usernames)&&usernames.length){publicAccess.usernames=usernames;}else{throw'must supply either userName/password or roles';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','PostPublicAccess',publicAccess)),'Failed to update public access for content item with id '+contentId);},removePublicAccess:function removePublicAccess(contentId){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentApiBaseUrl','RemovePublicAccess',{contentId:contentId})),'Failed to remove public access for content item with id '+contentId);}};}
angular.module('umbraco.resources').factory('contentResource',contentResource);'use strict';function contentTypeResource($q,$http,umbRequestHelper,umbDataFormatter,localizationService,notificationsService){return{getCount:function getCount(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetCount')),'Failed to retrieve count');},getAvailableCompositeContentTypes:function getAvailableCompositeContentTypes(contentTypeId,filterContentTypes,filterPropertyTypes,isElement){if(!filterContentTypes){filterContentTypes=[];}
if(!filterPropertyTypes){filterPropertyTypes=[];}
var query={contentTypeId:contentTypeId,filterContentTypes:filterContentTypes,filterPropertyTypes:filterPropertyTypes,isElement:isElement};return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetAvailableCompositeContentTypes'),query),'Failed to retrieve data for content type id '+contentTypeId);},getWhereCompositionIsUsedInContentTypes:function getWhereCompositionIsUsedInContentTypes(contentTypeId){var query={contentTypeId:contentTypeId};return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetWhereCompositionIsUsedInContentTypes'),query),'Failed to retrieve data for content type id '+contentTypeId);},getAllowedTypes:function getAllowedTypes(contentTypeId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetAllowedChildren',[{contentId:contentTypeId}])),'Failed to retrieve data for content id '+contentTypeId);},getAllPropertyTypeAliases:function getAllPropertyTypeAliases(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetAllPropertyTypeAliases')),'Failed to retrieve property type aliases');},getAllStandardFields:function getAllStandardFields(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetAllStandardFields')),'Failed to retrieve standard fields');},getPropertyTypeScaffold:function getPropertyTypeScaffold(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetPropertyTypeScaffold',[{id:id}])),'Failed to retrieve property type scaffold');},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetById',[{id:id}])),'Failed to retrieve content type');},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete content type');},deleteContainerById:function deleteContainerById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','DeleteContainer',[{id:id}])),'Failed to delete content type contaier');},getAll:function getAll(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetAll')),'Failed to retrieve all content types');},getScaffold:function getScaffold(parentId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','GetEmpty',{parentId:parentId})),'Failed to retrieve content type scaffold');},save:function save(contentType){var saveModel=umbDataFormatter.formatContentTypePostData(contentType);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','PostSave'),saveModel),'Failed to save data for content type id '+contentType.id);},move:function move(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','PostMove'),{parentId:args.parentId,id:args.id},{responseType:'text'}),'Failed to move content');},copy:function copy(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','PostCopy'),{parentId:args.parentId,id:args.id},{responseType:'text'}),'Failed to copy content');},createContainer:function createContainer(parentId,name){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','PostCreateContainer',{parentId:parentId,name:encodeURIComponent(name)})),'Failed to create a folder under parent id '+parentId);},createCollection:function createCollection(parentId,collectionName,collectionCreateTemplate,collectionItemName,collectionItemCreateTemplate,collectionIcon,collectionItemIcon){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','PostCreateCollection',{parentId:parentId,collectionName:collectionName,collectionCreateTemplate:collectionCreateTemplate,collectionItemName:collectionItemName,collectionItemCreateTemplate:collectionItemCreateTemplate,collectionIcon:collectionIcon,collectionItemIcon:collectionItemIcon})),'Failed to create collection under '+parentId);},renameContainer:function renameContainer(id,name){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','PostRenameContainer',{id:id,name:name})),'Failed to rename the folder with id '+id);},export:function _export(id){if(!id){throw'id cannot be null';}
var url=umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','Export',{id:id});return umbRequestHelper.downloadFile(url).then(function(){localizationService.localize('speechBubbles_documentTypeExportedSuccess').then(function(value){notificationsService.success(value);});},function(data){localizationService.localize('speechBubbles_documentTypeExportedError').then(function(value){notificationsService.error(value);});});},import:function _import(file){if(!file){throw'file cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','Import',{file:file})),'Failed to import document type '+file);},createDefaultTemplate:function createDefaultTemplate(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','PostCreateDefaultTemplate',{id:id})),'Failed to create default template for content type with id '+id);},hasContentNodes:function hasContentNodes(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('contentTypeApiBaseUrl','HasContentNodes',[{id:id}])),'Failed to retrieve indication for whether content type with id '+id+' has associated content nodes');}};}
angular.module('umbraco.resources').factory('contentTypeResource',contentTypeResource);'use strict';function currentUserResource($q,$http,umbRequestHelper,umbDataFormatter){return{getPermissions:function getPermissions(nodeIds){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('currentUserApiBaseUrl','GetPermissions'),nodeIds),'Failed to get permissions');},checkPermission:function checkPermission(permission,id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('currentUserApiBaseUrl','HasPermission',[{permissionToCheck:permission},{nodeId:id}])),'Failed to check permission for item '+id);},saveTourStatus:function saveTourStatus(tourStatus){if(!tourStatus){return $q.reject({errorMsg:'tourStatus cannot be empty'});}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('currentUserApiBaseUrl','PostSetUserTour'),tourStatus),'Failed to save tour status');},getTours:function getTours(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('currentUserApiBaseUrl','GetUserTours')),'Failed to get tours');},performSetInvitedUserPassword:function performSetInvitedUserPassword(newPassword){if(!newPassword){return $q.reject({errorMsg:'newPassword cannot be empty'});}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('currentUserApiBaseUrl','PostSetInvitedUserPassword'),Utilities.toJson(newPassword)),'Failed to change password');},changePassword:function changePassword(changePasswordArgs){changePasswordArgs=umbDataFormatter.formatChangePasswordModel(changePasswordArgs);if(!changePasswordArgs){throw'No password data to change';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('currentUserApiBaseUrl','PostChangePassword'),changePasswordArgs),'Failed to change password');}};}
angular.module('umbraco.resources').factory('currentUserResource',currentUserResource);'use strict';function dashboardResource($q,$http,umbRequestHelper){return{getDashboard:function getDashboard(section){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dashboardApiBaseUrl','GetDashboard',[{section:section}])),'Failed to get dashboard '+section);},getRemoteDashboardContent:function getRemoteDashboardContent(section,baseurl){var values=[{section:section}];if(baseurl){values.push({baseurl:baseurl});}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dashboardApiBaseUrl','GetRemoteDashboardContent',values)),'Failed to get dashboard content');},getRemoteDashboardCssUrl:function getRemoteDashboardCssUrl(section,baseurl){var values=[{section:section}];if(baseurl){values.push({baseurl:baseurl});}
return umbRequestHelper.getApiUrl('dashboardApiBaseUrl','GetRemoteDashboardCss',values);},getRemoteXmlData:function getRemoteXmlData(site,url){var values={site:site,url:url};return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dashboardApiBaseUrl','GetRemoteXml',values)),'Failed to get remote xml');}};}
angular.module('umbraco.resources').factory('dashboardResource',dashboardResource);'use strict';function dataTypeResource($q,$http,umbDataFormatter,umbRequestHelper){return{getPreValues:function getPreValues(editorAlias,dataTypeId){if(!dataTypeId){dataTypeId=-1;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetPreValues',[{editorAlias:editorAlias},{dataTypeId:dataTypeId}])),'Failed to retrieve pre values for editor alias '+editorAlias);},getReferences:function getReferences(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetReferences',{id:id})),'Failed to retrieve usages for data type of id '+id);},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetById',[{id:id}])),'Failed to retrieve data for data type id '+id);},getByName:function getByName(name){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetByName',[{name:name}])),'Failed to retrieve data for data type with name: '+name);},getAll:function getAll(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetAll')),'Failed to retrieve data');},getGroupedDataTypes:function getGroupedDataTypes(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetGroupedDataTypes')),'Failed to retrieve data');},getGroupedPropertyEditors:function getGroupedPropertyEditors(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetGroupedPropertyEditors')),'Failed to retrieve data');},getAllPropertyEditors:function getAllPropertyEditors(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetAllPropertyEditors')),'Failed to retrieve data');},getScaffold:function getScaffold(parentId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetEmpty',{parentId:parentId})),'Failed to retrieve data for empty datatype');},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete item '+id);},deleteContainerById:function deleteContainerById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','DeleteContainer',[{id:id}])),'Failed to delete content type contaier');},getCustomListView:function getCustomListView(contentTypeAlias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','GetCustomListView',{contentTypeAlias:contentTypeAlias})),'Failed to retrieve data for custom listview datatype');},createCustomListView:function createCustomListView(contentTypeAlias){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','PostCreateCustomListView',{contentTypeAlias:contentTypeAlias})),'Failed to create a custom listview datatype');},save:function save(dataType,preValues,isNew){var saveModel=umbDataFormatter.formatDataTypePostData(dataType,preValues,'save'+(isNew?'New':''));return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','PostSave'),saveModel),'Failed to save data for data type id '+dataType.id);},move:function move(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','PostMove'),{parentId:args.parentId,id:args.id},{responseType:'text'}),'Failed to move content');},createContainer:function createContainer(parentId,name){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','PostCreateContainer',{parentId:parentId,name:encodeURIComponent(name)})),'Failed to create a folder under parent id '+parentId);},renameContainer:function renameContainer(id,name){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dataTypeApiBaseUrl','PostRenameContainer',{id:id,name:encodeURIComponent(name)})),'Failed to rename the folder with id '+id);}};}
angular.module('umbraco.resources').factory('dataTypeResource',dataTypeResource);'use strict';function dictionaryResource($q,$http,$location,umbRequestHelper,umbDataFormatter){function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dictionaryApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete item '+id);}
function create(parentid,key){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dictionaryApiBaseUrl','Create',{parentId:parentid,key:key})),'Failed to create item ');}
function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dictionaryApiBaseUrl','GetById',[{id:id}])),'Failed to get item '+id);}
function save(dictionary,nameIsDirty){var saveModel=umbDataFormatter.formatDictionaryPostData(dictionary,nameIsDirty);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('dictionaryApiBaseUrl','PostSave'),saveModel),'Failed to save data for dictionary id '+dictionary.id);}
function getList(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('dictionaryApiBaseUrl','getList')),'Failed to get list');}
var resource={deleteById:deleteById,create:create,getById:getById,save:save,getList:getList};return resource;}
angular.module('umbraco.resources').factory('dictionaryResource',dictionaryResource);'use strict';function elementTypeResource($q,$http,umbRequestHelper){return{getAll:function getAll(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('elementTypeApiBaseUrl','GetAll')),'Failed to retrieve element types');}};}
angular.module('umbraco.resources').factory('elementTypeResource',elementTypeResource);'use strict';function emailMarketingResource($http,umbRequestHelper){var emailApiUrl='https://emailcollector.umbraco.io/api/EmailProxy';return{postAddUserToEmailMarketing:function postAddUserToEmailMarketing(user){return umbRequestHelper.resourcePromise($http.post(emailApiUrl,{name:user.name,email:user.email,usergroup:user.userGroups}),'Failed to add user to email marketing list');}};}
angular.module('umbraco.resources').factory('emailMarketingResource',emailMarketingResource);'use strict';function entityResource($q,$http,umbRequestHelper){return{getSafeAlias:function getSafeAlias(value,camelCase){if(!value){return'';}
value=value.replace('#','');return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetSafeAlias',{value:encodeURIComponent(value),camelCase:camelCase})),'Failed to retrieve content type scaffold');},getPath:function getPath(id,type){if(id===-1||id==='-1'){return'-1';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetPath',[{id:id},{type:type}])),'Failed to retrieve path for id:'+id);},getUrl:function getUrl(id,type,culture){if(id===-1||id==='-1'){return'';}
if(!culture){culture='';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetUrl',[{id:id},{type:type},{culture:culture}])),'Failed to retrieve url for id:'+id);},getUrlByUdi:function getUrlByUdi(udi,culture){if(!udi){return'';}
if(!culture){culture='';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetUrl',[{udi:udi},{culture:culture}])),'Failed to retrieve url for UDI:'+udi);},getById:function getById(id,type){if(id===-1||id==='-1'){return null;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetById',[{id:id},{type:type}])),'Failed to retrieve entity data for id '+id);},getUrlAndAnchors:function getUrlAndAnchors(id,culture){if(id===-1||id==='-1'){return null;}
if(!culture){culture='';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetUrlAndAnchors',[{id:id},{culture:culture}])),'Failed to retrieve url and anchors data for id '+id);},getAnchors:function getAnchors(rteContent){if(!rteContent||rteContent.length===0){return $q.when([]);}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetAnchors'),{rteContent:rteContent}),'Failed to anchors data for rte content '+rteContent);},getByIds:function getByIds(ids,type){var query='type='+type;return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetByIds',query),{ids:ids}),'Failed to retrieve entity data for ids '+ids);},getByQuery:function getByQuery(query,nodeContextId,type){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetByQuery',[{query:query},{nodeContextId:nodeContextId},{type:type}])),'Failed to retrieve entity data for query '+query);},getAll:function getAll(type,postFilter){var query='type='+type+'&postFilter='+(postFilter?encodeURIComponent(postFilter):'');return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetAll',query)),'Failed to retrieve entity data for type '+type);},getAncestors:function getAncestors(id,type,culture,options){if(!culture){culture='';}
var args=[{id:id},{type:type},{culture:culture}];if(options&&options.dataTypeKey){args.push({dataTypeKey:options.dataTypeKey});}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetAncestors',args)),'Failed to retrieve ancestor data for id '+id);},getChildren:function getChildren(id,type,options){var args=[{id:id},{type:type}];if(options&&options.dataTypeKey){args.push({dataTypeKey:options.dataTypeKey});}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetChildren',args)),'Failed to retrieve child data for id '+id);},getPagedChildren:function getPagedChildren(parentId,type,options){var defaults={pageSize:1,pageNumber:100,filter:'',orderDirection:'Ascending',orderBy:'SortOrder',dataTypeKey:null};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetPagedChildren',{id:parentId,type:type,pageNumber:options.pageNumber,pageSize:options.pageSize,orderBy:options.orderBy,orderDirection:options.orderDirection,filter:encodeURIComponent(options.filter),dataTypeKey:options.dataTypeKey})),'Failed to retrieve child data for id '+parentId);},getPagedDescendants:function getPagedDescendants(parentId,type,options){var defaults={pageSize:100,pageNumber:1,filter:'',orderDirection:'Ascending',orderBy:'SortOrder',dataTypeKey:null};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','GetPagedDescendants',{id:parentId,type:type,pageNumber:options.pageNumber,pageSize:options.pageSize,orderBy:options.orderBy,orderDirection:options.orderDirection,filter:encodeURIComponent(options.filter),dataTypeKey:options.dataTypeKey})),'Failed to retrieve child data for id '+parentId);},search:function search(query,type,searchFrom,canceler,dataTypeKey){var args=[{query:query},{type:type}];if(searchFrom){args.push({searchFrom:searchFrom});}
if(dataTypeKey){args.push({dataTypeKey:dataTypeKey});}
var httpConfig={};if(canceler){httpConfig['timeout']=canceler;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','Search',args),httpConfig),'Failed to retrieve entity data for query '+query);},searchAll:function searchAll(query,canceler){var httpConfig={};if(canceler){httpConfig['timeout']=canceler;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('entityApiBaseUrl','SearchAll',[{query:query}]),httpConfig),'Failed to retrieve entity data for query '+query);}};}
angular.module('umbraco.resources').factory('entityResource',entityResource);'use strict';(function(){'use strict';function healthCheckResource($http,umbRequestHelper){function getAllChecks(){return umbRequestHelper.resourcePromise($http.get(Umbraco.Sys.ServerVariables.umbracoUrls.healthCheckBaseUrl+'GetAllHealthChecks'),'Failed to retrieve health checks');}
function getStatus(id){return umbRequestHelper.resourcePromise($http.get(Umbraco.Sys.ServerVariables.umbracoUrls.healthCheckBaseUrl+'GetStatus?id='+id),'Failed to retrieve status for health check with ID '+id);}
function executeAction(action){return umbRequestHelper.resourcePromise($http.post(Umbraco.Sys.ServerVariables.umbracoUrls.healthCheckBaseUrl+'ExecuteAction',action),'Failed to execute action with alias '+action.alias+' and healthCheckId + '+action.healthCheckId);}
var resource={getAllChecks:getAllChecks,getStatus:getStatus,executeAction:executeAction};return resource;}
angular.module('umbraco.resources').factory('healthCheckResource',healthCheckResource);}());'use strict';(function(){'use strict';function imageUrlGeneratorResource($http,umbRequestHelper){function getCropUrl(mediaPath,width,height,imageCropMode,animationProcessMode){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('imageUrlGeneratorApiBaseUrl','GetCropUrl',{mediaPath:mediaPath,width:width,height:height,imageCropMode:imageCropMode,animationProcessMode:animationProcessMode})),'Failed to get crop URL');}
var resource={getCropUrl:getCropUrl};return resource;}
angular.module('umbraco.resources').factory('imageUrlGeneratorResource',imageUrlGeneratorResource);}());'use strict';(function(){'use strict';function javascriptLibraryResource($q,$http,umbRequestHelper){var existingLocales=null;function getSupportedLocales(){var deferred=$q.defer();if(existingLocales===null){umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('backOfficeAssetsApiBaseUrl','GetSupportedLocales')),'Failed to get cultures').then(function(locales){existingLocales=locales;deferred.resolve(existingLocales);});}else{deferred.resolve(existingLocales);}
return deferred.promise;}
var service={getSupportedLocales:getSupportedLocales};return service;}
angular.module('umbraco.resources').factory('javascriptLibraryResource',javascriptLibraryResource);}());'use strict';function languageResource($http,umbRequestHelper){return{getCultures:function getCultures(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('languageApiBaseUrl','GetAllCultures')),'Failed to get cultures');},getAll:function getAll(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('languageApiBaseUrl','GetAllLanguages')),'Failed to get languages');},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('languageApiBaseUrl','GetLanguage',{id:id})),'Failed to get language with id '+id);},save:function save(lang){if(!lang)
throw'\'lang\' parameter cannot be null';return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('languageApiBaseUrl','SaveLanguage'),lang),'Failed to save language '+lang.id);},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('languageApiBaseUrl','DeleteLanguage',{id:id})),'Failed to delete item '+id);}};}
angular.module('umbraco.resources').factory('languageResource',languageResource);'use strict';function logResource($q,$http,umbRequestHelper){function isValidDate(input){if(input){if(Object.prototype.toString.call(input)==='[object Date]'&&!isNaN(input.getTime())){return true;}}
return false;};function dateToValidIsoString(input){if(isValidDate(input)){return input.toISOString();}
return'';};return{getPagedEntityLog:function getPagedEntityLog(options){var defaults={pageSize:10,pageNumber:1,orderDirection:'Descending'};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.hasOwnProperty('sinceDate')){options.sinceDate=dateToValidIsoString(options.sinceDate);}
if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
if(options.id===undefined||options.id===null){throw'options.id is required';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('logApiBaseUrl','GetPagedEntityLog',options)),'Failed to retrieve log data for id');},getPagedUserLog:function getPagedUserLog(options){var defaults={pageSize:10,pageNumber:1,orderDirection:'Descending'};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.hasOwnProperty('sinceDate')){options.sinceDate=dateToValidIsoString(options.sinceDate);}
if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('logApiBaseUrl','GetPagedCurrentUserLog',options)),'Failed to retrieve log data for id');},getLog:function getLog(type,since){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('logApiBaseUrl','GetLog',[{logtype:type},{sinceDate:dateToValidIsoString(since)}])),'Failed to retrieve log data of type '+type+' since '+since);}};}
angular.module('umbraco.resources').factory('logResource',logResource);'use strict';function logViewerResource($q,$http,umbRequestHelper){var request=function request(verb,method,params,error){return umbRequestHelper.resourcePromise(verb==='GET'?$http.get(umbRequestHelper.getApiUrl('logViewerApiBaseUrl',method)+(params?params:'')):$http.post(umbRequestHelper.getApiUrl('logViewerApiBaseUrl',method),params),error);};return{getNumberOfErrors:function getNumberOfErrors(startDate,endDate){return request('GET','GetNumberOfErrors','?startDate='+startDate+'&endDate='+endDate,'Failed to retrieve number of errors in logs');},getLogLevel:function getLogLevel(){return request('GET','GetLogLevel',null,'Failed to retrieve log level');},getLogLevelCounts:function getLogLevelCounts(startDate,endDate){return request('GET','GetLogLevelCounts','?startDate='+startDate+'&endDate='+endDate,'Failed to retrieve log level counts');},getMessageTemplates:function getMessageTemplates(startDate,endDate){return request('GET','GetMessageTemplates','?startDate='+startDate+'&endDate='+endDate,'Failed to retrieve log templates');},getSavedSearches:function getSavedSearches(){return request('GET','GetSavedSearches',null,'Failed to retrieve saved searches');},postSavedSearch:function postSavedSearch(name,query){return request('POST','PostSavedSearch',{'name':name,'query':query},'Failed to add new saved search');},deleteSavedSearch:function deleteSavedSearch(name,query){return request('POST','DeleteSavedSearch',{'name':name,'query':query},'Failed to delete saved search');},getLogs:function getLogs(options){var defaults={pageSize:100,pageNumber:1,orderDirection:'Descending',filterExpression:''};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('logViewerApiBaseUrl','GetLogs',options)),'Failed to retrieve common log messages');},canViewLogs:function canViewLogs(startDate,endDate){return request('GET','GetCanViewLogs','?startDate='+startDate+'&endDate='+endDate,'Failed to retrieve state if logs can be viewed');}};}
angular.module('umbraco.resources').factory('logViewerResource',logViewerResource);'use strict';function macroResource($q,$http,umbRequestHelper){return{getMacroParameters:function getMacroParameters(macroId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('macroRenderingApiBaseUrl','GetMacroParameters',[{macroId:macroId}])),'Failed to retrieve macro parameters for macro with id  '+macroId);},getMacroResultAsHtmlForEditor:function getMacroResultAsHtmlForEditor(macroAlias,pageId,macroParamDictionary){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('macroRenderingApiBaseUrl','GetMacroResultAsHtmlForEditor'),{macroAlias:macroAlias,pageId:pageId,macroParams:macroParamDictionary}),'Failed to retrieve macro result for macro with alias  '+macroAlias);},createPartialViewMacroWithFile:function createPartialViewMacroWithFile(virtualPath,filename){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('macroRenderingApiBaseUrl','CreatePartialViewMacroWithFile'),{virtualPath:virtualPath,filename:filename}),'Failed to create macro "'+filename+'"');},createMacro:function createMacro(name){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('macroApiBaseUrl','Create?name='+name)),'Failed to create macro "'+name+'"');},getPartialViews:function getPartialViews(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('macroApiBaseUrl','GetPartialViews'),'Failed to get partial views'));},getParameterEditors:function getParameterEditors(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('macroApiBaseUrl','GetParameterEditors'),'Failed to get parameter editors'));},getGroupedParameterEditors:function getGroupedParameterEditors(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('macroApiBaseUrl','GetGroupedParameterEditors'),'Failed to get parameter editors'));},getParameterEditorByAlias:function getParameterEditorByAlias(alias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('macroApiBaseUrl','GetParameterEditorByAlias',{'alias':alias}),'Failed to get parameter editor'));},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('macroApiBaseUrl','GetById',{'id':id}),'Failed to get macro'));},saveMacro:function saveMacro(macro){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('macroApiBaseUrl','Save'),macro));},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('macroApiBaseUrl','deleteById',{'id':id})));}};}
angular.module('umbraco.resources').factory('macroResource',macroResource);'use strict';function mediaResource($q,$http,umbDataFormatter,umbRequestHelper){function saveMediaItem(content,action,files){return umbRequestHelper.postSaveContent({restApiUrl:umbRequestHelper.getApiUrl('mediaApiBaseUrl','PostSave'),content:content,action:action,files:files,dataFormatter:function dataFormatter(c,a){return umbDataFormatter.formatMediaPostData(c,a);}});}
return{getRecycleBin:function getRecycleBin(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetRecycleBin')),'Failed to retrieve data for media recycle bin');},sort:function sort(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.sortedIds){throw'args.sortedIds cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaApiBaseUrl','PostSort'),{parentId:args.parentId,idSortOrder:args.sortedIds}),'Failed to sort media');},move:function move(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaApiBaseUrl','PostMove'),{parentId:args.parentId,id:args.id},{responseType:'text'}),{error:function error(data){var errorMsg='Failed to move media';if(data.id!==undefined&&data.parentId!==undefined){if(data.id===data.parentId){errorMsg='Media can\'t be moved into itself';}}else if(data.notifications!==undefined){if(data.notifications.length>0){if(data.notifications[0].header.length>0){errorMsg=data.notifications[0].header;}
if(data.notifications[0].message.length>0){errorMsg=errorMsg+': '+data.notifications[0].message;}}}
return{errorMsg:errorMsg};}});},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetById',[{id:id}])),'Failed to retrieve data for media id '+id);},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete item '+id);},getByIds:function getByIds(ids){var idQuery='';_.each(ids,function(item){idQuery+='ids='+item+'&';});return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetByIds',idQuery)),'Failed to retrieve data for media ids '+ids);},getScaffold:function getScaffold(parentId,alias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetEmpty',[{contentTypeAlias:alias},{parentId:parentId}])),'Failed to retrieve data for empty media item type '+alias);},rootMedia:function rootMedia(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetRootMedia')),'Failed to retrieve data for root media');},getChildren:function getChildren(parentId,options){var defaults={pageSize:0,pageNumber:0,filter:'',orderDirection:'Ascending',orderBy:'SortOrder',orderBySystemField:true};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
function toBool(v){if(Utilities.isNumber(v)){return v>0;}
if(Utilities.isString(v)){return v==='true';}
if(typeof v==='boolean'){return v;}
return false;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetChildren',[{id:parentId},{pageNumber:options.pageNumber},{pageSize:options.pageSize},{orderBy:options.orderBy},{orderDirection:options.orderDirection},{orderBySystemField:toBool(options.orderBySystemField)},{filter:options.filter}])),'Failed to retrieve children for media item '+parentId);},save:function save(media,isNew,files){return saveMediaItem(media,'save'+(isNew?'New':''),files);},addFolder:function addFolder(name,parentId){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaApiBaseUrl','PostAddFolder'),{name:name,parentId:parentId}),'Failed to add folder');},getChildFolders:function getChildFolders(parentId){if(!parentId){parentId=-1;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetChildFolders',{id:parentId,pageNumber:1,pageSize:500})),'Failed to retrieve child folders for media item '+parentId);},emptyRecycleBin:function emptyRecycleBin(){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaApiBaseUrl','EmptyRecycleBin')),'Failed to empty the recycle bin');},search:function search(query,pageNumber,pageSize,searchFrom){var args=[{'query':query},{'pageNumber':pageNumber},{'pageSize':pageSize},{'searchFrom':searchFrom}];return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','Search',args)),'Failed to retrieve media items for search: '+query);},getPagedReferences:function getPagedReferences(id,options){var defaults={pageSize:25,pageNumber:1,entityType:'DOCUMENT'};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaApiBaseUrl','GetPagedReferences',{id:id,entityType:options.entityType,pageNumber:options.pageNumber,pageSize:options.pageSize})),'Failed to retrieve usages for media of id '+id);}};}
angular.module('umbraco.resources').factory('mediaResource',mediaResource);'use strict';function mediaTypeResource($q,$http,umbRequestHelper,umbDataFormatter,localizationService){return{getCount:function getCount(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','GetCount')),'Failed to retrieve count');},getAvailableCompositeContentTypes:function getAvailableCompositeContentTypes(contentTypeId,filterContentTypes,filterPropertyTypes){if(!filterContentTypes){filterContentTypes=[];}
if(!filterPropertyTypes){filterPropertyTypes=[];}
var query={contentTypeId:contentTypeId,filterContentTypes:filterContentTypes,filterPropertyTypes:filterPropertyTypes};return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','GetAvailableCompositeMediaTypes'),query),'Failed to retrieve data for content type id '+contentTypeId);},getWhereCompositionIsUsedInContentTypes:function getWhereCompositionIsUsedInContentTypes(contentTypeId){var query={contentTypeId:contentTypeId};return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','GetWhereCompositionIsUsedInContentTypes'),query),'Failed to retrieve data for content type id '+contentTypeId);},getAllowedTypes:function getAllowedTypes(mediaId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','GetAllowedChildren',[{contentId:mediaId}])),'Failed to retrieve allowed types for media id '+mediaId);},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','GetById',[{id:id}])),'Failed to retrieve content type');},getAll:function getAll(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','GetAll')),'Failed to retrieve all content types');},getScaffold:function getScaffold(parentId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','GetEmpty',{parentId:parentId})),'Failed to retrieve content type scaffold');},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','DeleteById',[{id:id}])),'Failed to retrieve content type');},deleteContainerById:function deleteContainerById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','DeleteContainer',[{id:id}])),'Failed to delete content type contaier');},save:function save(contentType){var saveModel=umbDataFormatter.formatContentTypePostData(contentType);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','PostSave'),saveModel),'Failed to save data for content type id '+contentType.id);},move:function move(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
var promise=localizationService.localize('media_moveFailed');return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','PostMove'),{parentId:args.parentId,id:args.id},{responseType:'text'}),promise);},copy:function copy(args){if(!args){throw'args cannot be null';}
if(!args.parentId){throw'args.parentId cannot be null';}
if(!args.id){throw'args.id cannot be null';}
var promise=localizationService.localize('media_copyFailed');return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','PostCopy'),{parentId:args.parentId,id:args.id},{responseType:'text'}),promise);},createContainer:function createContainer(parentId,name){var promise=localizationService.localize('media_createFolderFailed',[parentId]);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','PostCreateContainer',{parentId:parentId,name:encodeURIComponent(name)})),promise);},renameContainer:function renameContainer(id,name){var promise=localizationService.localize('media_renameFolderFailed',[id]);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('mediaTypeApiBaseUrl','PostRenameContainer',{id:id,name:name})),promise);}};}
angular.module('umbraco.resources').factory('mediaTypeResource',mediaTypeResource);'use strict';function memberResource($q,$http,umbDataFormatter,umbRequestHelper){function saveMember(content,action,files){return umbRequestHelper.postSaveContent({restApiUrl:umbRequestHelper.getApiUrl('memberApiBaseUrl','PostSave'),content:content,action:action,files:files,dataFormatter:function dataFormatter(c,a){return umbDataFormatter.formatMemberPostData(c,a);}});}
return{getPagedResults:function getPagedResults(memberTypeAlias,options){if(memberTypeAlias==='all-members'){memberTypeAlias=null;}
var defaults={pageSize:25,pageNumber:1,filter:'',orderDirection:'Ascending',orderBy:'LoginName',orderBySystemField:true};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
function toBool(v){if(Utilities.isNumber(v)){return v>0;}
if(Utilities.isString(v)){return v==='true';}
if(typeof v==='boolean'){return v;}
return false;}
var params=[{pageNumber:options.pageNumber},{pageSize:options.pageSize},{orderBy:options.orderBy},{orderDirection:options.orderDirection},{orderBySystemField:toBool(options.orderBySystemField)},{filter:options.filter}];if(memberTypeAlias!=null){params.push({memberTypeAlias:memberTypeAlias});}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberApiBaseUrl','GetPagedResults',params)),'Failed to retrieve member paged result');},getListNode:function getListNode(listName){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberApiBaseUrl','GetListNodeDisplay',[{listName:listName}])),'Failed to retrieve data for member list '+listName);},getByKey:function getByKey(key){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberApiBaseUrl','GetByKey',[{key:key}])),'Failed to retrieve data for member id '+key);},deleteByKey:function deleteByKey(key){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('memberApiBaseUrl','DeleteByKey',[{key:key}])),'Failed to delete item '+key);},getScaffold:function getScaffold(alias){if(alias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberApiBaseUrl','GetEmpty',[{contentTypeAlias:alias}])),'Failed to retrieve data for empty member item type '+alias);}else{return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberApiBaseUrl','GetEmpty')),'Failed to retrieve data for empty member item type '+alias);}},save:function save(member,isNew,files){return saveMember(member,'save'+(isNew?'New':''),files);}};}
angular.module('umbraco.resources').factory('memberResource',memberResource);'use strict';function memberGroupResource($q,$http,umbRequestHelper){return{getGroups:function getGroups(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberGroupApiBaseUrl','GetAllGroups')),'Failed to retrieve data for member groups');},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberGroupApiBaseUrl','GetById',[{id:id}])),'Failed to retrieve member group');},getByIds:function getByIds(ids){var idQuery='';_.each(ids,function(item){idQuery+='ids='+item+'&';});return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberGroupApiBaseUrl','GetByIds',idQuery)),'Failed to retrieve member group');},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('memberGroupApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete member group');},getScaffold:function getScaffold(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberGroupApiBaseUrl','GetEmpty')),'Failed to retrieve data for member group');},save:function save(memberGroup){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('memberGroupApiBaseUrl','PostSave'),memberGroup),'Failed to save data for member group, id: '+memberGroup.id);}};}
angular.module('umbraco.resources').factory('memberGroupResource',memberGroupResource);'use strict';function memberTypeResource($q,$http,umbRequestHelper,umbDataFormatter){return{getAvailableCompositeContentTypes:function getAvailableCompositeContentTypes(contentTypeId,filterContentTypes,filterPropertyTypes){if(!filterContentTypes){filterContentTypes=[];}
if(!filterPropertyTypes){filterPropertyTypes=[];}
var query='';_.each(filterContentTypes,function(item){query+='filterContentTypes='+item+'&';});if(filterContentTypes.length===0){query+='filterContentTypes=&';}
_.each(filterPropertyTypes,function(item){query+='filterPropertyTypes='+item+'&';});if(filterPropertyTypes.length===0){query+='filterPropertyTypes=&';}
query+='contentTypeId='+contentTypeId;return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberTypeApiBaseUrl','GetAvailableCompositeMemberTypes',query)),'Failed to retrieve data for content type id '+contentTypeId);},getTypes:function getTypes(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberTypeApiBaseUrl','GetAllTypes')),'Failed to retrieve data for member types id');},getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberTypeApiBaseUrl','GetById',[{id:id}])),'Failed to retrieve content type');},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('memberTypeApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete member type');},getScaffold:function getScaffold(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('memberTypeApiBaseUrl','GetEmpty')),'Failed to retrieve content type scaffold');},save:function save(contentType){var saveModel=umbDataFormatter.formatContentTypePostData(contentType);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('memberTypeApiBaseUrl','PostSave'),saveModel),'Failed to save data for member type id '+contentType.id);}};}
angular.module('umbraco.resources').factory('memberTypeResource',memberTypeResource);'use strict';function modelsBuilderManagementResource($q,$http,umbRequestHelper){return{getModelsOutOfDateStatus:function getModelsOutOfDateStatus(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('modelsBuilderBaseUrl','GetModelsOutOfDateStatus')),'Failed to get models out-of-date status');},buildModels:function buildModels(){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('modelsBuilderBaseUrl','BuildModels')),'Failed to build models');},getDashboard:function getDashboard(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('modelsBuilderBaseUrl','GetDashboard')),'Failed to get dashboard');}};}
angular.module('umbraco.resources').factory('modelsBuilderManagementResource',modelsBuilderManagementResource);'use strict';angular.module('umbraco.resources').factory('Umbraco.PropertyEditors.NestedContent.Resources',function($q,$http,umbRequestHelper){return{getContentTypes:function getContentTypes(){var url=Umbraco.Sys.ServerVariables.umbracoSettings.umbracoPath+'/backoffice/UmbracoApi/NestedContent/GetContentTypes';return umbRequestHelper.resourcePromise($http.get(url),'Failed to retrieve content types');}};});'use strict';function ourPackageRepositoryResource($q,$http,umbDataFormatter,umbRequestHelper){var baseurl=Umbraco.Sys.ServerVariables.umbracoUrls.packagesRestApiBaseUrl;return{getDetails:function getDetails(packageId){return umbRequestHelper.resourcePromise($http.get(baseurl+'/'+packageId+'?version='+Umbraco.Sys.ServerVariables.application.version),'Failed to get package details');},getCategories:function getCategories(){return umbRequestHelper.resourcePromise($http.get(baseurl),'Failed to query packages');},getPopular:function getPopular(maxResults,category){if(maxResults===undefined){maxResults=10;}
if(category===undefined){category='';}
return umbRequestHelper.resourcePromise($http.get(baseurl+'?pageIndex=0&pageSize='+maxResults+'&category='+category+'&order=Popular&version='+Umbraco.Sys.ServerVariables.application.version),'Failed to query packages');},search:function search(pageIndex,pageSize,orderBy,category,query,canceler){var httpConfig={};if(canceler){httpConfig['timeout']=canceler;}
if(category===undefined){category='';}
if(query===undefined){query='';}
var order=!orderBy?'&order=Default':'&order='+orderBy;return umbRequestHelper.resourcePromise($http.get(baseurl+'?pageIndex='+pageIndex+'&pageSize='+pageSize+'&category='+category+'&query='+query+order+'&version='+Umbraco.Sys.ServerVariables.application.version),httpConfig,'Failed to query packages');}};}
angular.module('umbraco.resources').factory('ourPackageRepositoryResource',ourPackageRepositoryResource);'use strict';function packageResource($q,$http,umbDataFormatter,umbRequestHelper){return{getInstalled:function getInstalled(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('packageApiBaseUrl','GetInstalled')),'Failed to get installed packages');},validateInstalled:function validateInstalled(name,version){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','ValidateInstalled',{name:name,version:version})),'Failed to validate package '+name);},uninstall:function uninstall(packageId){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','Uninstall',{packageId:packageId})),'Failed to uninstall package');},fetch:function fetch(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','Fetch',[{packageGuid:id}])),'Failed to download package with guid '+id);},import:function _import(umbPackage){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','Import'),umbPackage),'Failed to install package. Error during the step "Import" ');},installFiles:function installFiles(umbPackage){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','InstallFiles'),umbPackage),'Failed to install package. Error during the step "InstallFiles" ');},checkRestart:function checkRestart(umbPackage){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','CheckRestart'),umbPackage),'Failed to install package. Error during the step "CheckRestart" ');},installData:function installData(umbPackage){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','InstallData'),umbPackage),'Failed to install package. Error during the step "InstallData" ');},cleanUp:function cleanUp(umbPackage){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageInstallApiBaseUrl','CleanUp'),umbPackage),'Failed to install package. Error during the step "CleanUp" ');},getAllCreated:function getAllCreated(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('packageApiBaseUrl','GetCreatedPackages')),'Failed to get created packages');},getCreatedById:function getCreatedById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('packageApiBaseUrl','GetCreatedPackageById',{id:id})),'Failed to get package');},getInstalledById:function getInstalledById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('packageApiBaseUrl','GetInstalledPackageById',{id:id})),'Failed to get package');},getEmpty:function getEmpty(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('packageApiBaseUrl','getEmpty')),'Failed to get scaffold');},savePackage:function savePackage(umbPackage){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageApiBaseUrl','PostSavePackage'),umbPackage),'Failed to create package');},deleteCreatedPackage:function deleteCreatedPackage(packageId){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('packageApiBaseUrl','DeleteCreatedPackage',{packageId:packageId})),'Failed to delete package '+packageId);}};}
angular.module('umbraco.resources').factory('packageResource',packageResource);'use strict';(function(){'use strict';function redirectUrlsResource($http,umbRequestHelper){function searchRedirectUrls(searchTerm,pageIndex,pageSize){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('redirectUrlManagementApiBaseUrl','SearchRedirectUrls',{searchTerm:searchTerm,page:pageIndex,pageSize:pageSize})),'Failed to retrieve data for searching redirect urls');}
function getRedirectsForContentItem(contentUdi){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('redirectUrlManagementApiBaseUrl','RedirectUrlsForContentItem',{contentUdi:contentUdi})),'Failed to retrieve redirects for content: '+contentUdi);}
function getEnableState(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('redirectUrlManagementApiBaseUrl','GetEnableState')),'Failed to retrieve data to check if the 301 redirect is enabled');}
function deleteRedirectUrl(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('redirectUrlManagementApiBaseUrl','DeleteRedirectUrl',{id:id})),'Failed to remove redirect');}
function toggleUrlTracker(disable){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('redirectUrlManagementApiBaseUrl','ToggleUrlTracker',{disable:disable})),'Failed to toggle redirect url tracker');}
var resource={searchRedirectUrls:searchRedirectUrls,deleteRedirectUrl:deleteRedirectUrl,toggleUrlTracker:toggleUrlTracker,getEnableState:getEnableState,getRedirectsForContentItem:getRedirectsForContentItem};return resource;}
angular.module('umbraco.resources').factory('redirectUrlsResource',redirectUrlsResource);}());'use strict';function relationResource($q,$http,umbRequestHelper){return{getByChildId:function getByChildId(id,alias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('relationApiBaseUrl','GetByChildId',{childId:id,relationTypeAlias:alias})),'Failed to get relation by child ID '+id+' and type of '+alias);},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('relationApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete item '+id);}};}
angular.module('umbraco.resources').factory('relationResource',relationResource);'use strict';function relationTypeResource($q,$http,umbRequestHelper,umbDataFormatter){return{getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('relationTypeApiBaseUrl','GetById',[{id:id}])),'Failed to get item '+id);},getRelationObjectTypes:function getRelationObjectTypes(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('relationTypeApiBaseUrl','GetRelationObjectTypes')),'Failed to get object types');},save:function save(relationType){var saveModel=umbDataFormatter.formatRelationTypePostData(relationType);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('relationTypeApiBaseUrl','PostSave'),saveModel),'Failed to save data for relation type ID'+relationType.id);},create:function create(relationType){var createModel=umbDataFormatter.formatRelationTypePostData(relationType);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('relationTypeApiBaseUrl','PostCreate'),createModel),'Failed to create new realtion');},deleteById:function deleteById(id){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('relationTypeApiBaseUrl','DeleteById',[{id:id}])),'Failed to delete item '+id);},getPagedResults:function getPagedResults(id,options){var defaults={pageSize:25,pageNumber:1};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('relationTypeApiBaseUrl','GetPagedResults',{id:id,pageNumber:options.pageNumber,pageSize:options.pageSize})),'Failed to get paged relations for id '+id);}};}
angular.module('umbraco.resources').factory('relationTypeResource',relationTypeResource);'use strict';function sectionResource($q,$http,umbRequestHelper){function getSectionsUrl(section){return Umbraco.Sys.ServerVariables.sectionApiBaseUrl+'GetSections';}
return{getSections:function getSections(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('sectionApiBaseUrl','GetSections')),'Failed to retrieve data for sections');},getAllSections:function getAllSections(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('sectionApiBaseUrl','GetAllSections')),'Failed to retrieve data for sections');}};}
angular.module('umbraco.resources').factory('sectionResource',sectionResource);'use strict';function stylesheetResource($q,$http,umbRequestHelper){return{getAll:function getAll(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('stylesheetApiBaseUrl','GetAll')),'Failed to retrieve stylesheets ');},getRulesByName:function getRulesByName(name){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('stylesheetApiBaseUrl','GetRulesByName',[{name:name}])),'Failed to retrieve stylesheets ');}};}
angular.module('umbraco.resources').factory('stylesheetResource',stylesheetResource);'use strict';function templateResource($q,$http,umbDataFormatter,umbRequestHelper,localizationService){return{getById:function getById(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateApiBaseUrl','GetById',[{id:id}])),'Failed to retrieve data for template id '+id);},getByAlias:function getByAlias(alias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateApiBaseUrl','GetByAlias',[{alias:alias}])),'Failed to retrieve data for template with alias: '+alias);},getAll:function getAll(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateApiBaseUrl','GetAll')),'Failed to retrieve data');},getScaffold:function getScaffold(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateApiBaseUrl','GetScaffold',[{id:id}])),'Failed to retrieve data for empty template');},deleteById:function deleteById(id){var promise=localizationService.localize('template_deleteByIdFailed',[id]);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('templateApiBaseUrl','DeleteById',[{id:id}])),promise);},save:function save(template){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('templateApiBaseUrl','PostSave'),template),'Failed to save data for template id '+template.id);}};}
angular.module('umbraco.resources').factory('templateResource',templateResource);'use strict';(function(){'use strict';function templateQueryResource($http,umbRequestHelper){function getAllowedProperties(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateQueryApiBaseUrl','GetAllowedProperties')),'Failed to retrieve properties');}
function getContentTypes(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateQueryApiBaseUrl','GetContentTypes')),'Failed to retrieve content types');}
function getFilterConditions(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('templateQueryApiBaseUrl','GetFilterConditions')),'Failed to retrieve filter conditions');}
function postTemplateQuery(query){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('templateQueryApiBaseUrl','PostTemplateQuery'),query),'Failed to retrieve query');}
var resource={getAllowedProperties:getAllowedProperties,getContentTypes:getContentTypes,getFilterConditions:getFilterConditions,postTemplateQuery:postTemplateQuery};return resource;}
angular.module('umbraco.resources').factory('templateQueryResource',templateQueryResource);}());'use strict';(function(){'use strict';function tourResource($http,umbRequestHelper,$q,umbDataFormatter){function getTours(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('tourApiBaseUrl','GetTours')),'Failed to get tours');}
function getToursForDoctype(doctypeAlias){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('tourApiBaseUrl','GetToursForDoctype',[{doctypeAlias:doctypeAlias}])),'Failed to get tours');}
var resource={getTours:getTours,getToursForDoctype:getToursForDoctype};return resource;}
angular.module('umbraco.resources').factory('tourResource',tourResource);}());'use strict';function treeResource($q,$http,umbRequestHelper){function getTreeNodesUrl(node){if(!node.childNodesUrl){throw'No childNodesUrl property found on the tree node, cannot load child nodes';}
return node.childNodesUrl;}
function getTreeMenuUrl(node){if(!node.menuUrl){return null;}
return node.menuUrl;}
return{loadMenu:function loadMenu(node){var treeMenuUrl=getTreeMenuUrl(node);if(treeMenuUrl!==undefined&&treeMenuUrl!==null&&treeMenuUrl.length>0){return umbRequestHelper.resourcePromise($http.get(getTreeMenuUrl(node)),'Failed to retrieve data for a node\'s menu '+node.id);}else{return $q.reject({errorMsg:'No tree menu url defined for node '+node.id});}},loadApplication:function loadApplication(options){if(!options||!options.section){throw'The object specified for does not contain a \'section\' property';}
if(!options.tree){options.tree='';}
if(!options.isDialog){options.isDialog=false;}
var query='application='+options.section+'&tree='+options.tree+'&use='+(options.isDialog?'dialog':'main');if(options.queryString){query+='&'+options.queryString;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('treeApplicationApiBaseUrl','GetApplicationTrees',query)),'Failed to retrieve data for application tree '+options.section);},loadNodes:function loadNodes(options){if(!options||!options.node){throw'The options parameter object does not contain the required properties: \'node\'';}
return umbRequestHelper.resourcePromise($http.get(getTreeNodesUrl(options.node)),'Failed to retrieve data for child nodes '+options.node.nodeId);}};}
angular.module('umbraco.resources').factory('treeResource',treeResource);'use strict';(function(){'use strict';function userGroupsResource($http,umbRequestHelper,$q,umbDataFormatter){function getUserGroupScaffold(){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('userGroupsApiBaseUrl','GetEmptyUserGroup')),'Failed to get the user group scaffold');}
function saveUserGroup(userGroup,isNew){if(!userGroup){throw'userGroup not specified';}
var formattedSaveData=umbDataFormatter.formatUserGroupPostData(userGroup,'save'+(isNew?'New':''));return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userGroupsApiBaseUrl','PostSaveUserGroup'),formattedSaveData),'Failed to save user group');}
function getUserGroup(id){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('userGroupsApiBaseUrl','GetUserGroup',{id:id})),'Failed to retrieve data for user group '+id);}
function getUserGroups(args){if(!args){args={onlyCurrentUserGroups:true};}
if(args.onlyCurrentUserGroups===undefined||args.onlyCurrentUserGroups===null){args.onlyCurrentUserGroups=true;}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('userGroupsApiBaseUrl','GetUserGroups',args)),'Failed to retrieve user groups');}
function deleteUserGroups(userGroupIds){var query='userGroupIds='+userGroupIds.join('&userGroupIds=');return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userGroupsApiBaseUrl','PostDeleteUserGroups',query)),'Failed to delete user groups');}
var resource={saveUserGroup:saveUserGroup,getUserGroup:getUserGroup,getUserGroups:getUserGroups,getUserGroupScaffold:getUserGroupScaffold,deleteUserGroups:deleteUserGroups};return resource;}
angular.module('umbraco.resources').factory('userGroupsResource',userGroupsResource);}());'use strict';(function(){'use strict';function usersResource($http,umbRequestHelper,$q,umbDataFormatter){function clearAvatar(userId){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostClearAvatar',{id:userId})),'Failed to clear the user avatar '+userId);}
function disableUsers(userIds){if(!userIds){throw'userIds not specified';}
var qry='userIds='+userIds.join('&userIds=');return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostDisableUsers',qry)),'Failed to disable the users '+userIds.join(','));}
function enableUsers(userIds){if(!userIds){throw'userIds not specified';}
var qry='userIds='+userIds.join('&userIds=');return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostEnableUsers',qry)),'Failed to enable the users '+userIds.join(','));}
function unlockUsers(userIds){if(!userIds){throw'userIds not specified';}
var qry='userIds='+userIds.join('&userIds=');return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostUnlockUsers',qry)),'Failed to enable the users '+userIds.join(','));}
function setUserGroupsOnUsers(userGroups,userIds){var userGroupAliases=userGroups.map(function(o){return o.alias;});var query='userGroupAliases='+userGroupAliases.join('&userGroupAliases=')+'&userIds='+userIds.join('&userIds=');return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostSetUserGroupsOnUsers',query)),'Failed to set user groups '+userGroupAliases.join(',')+' on the users '+userIds.join(','));}
function getPagedResults(options){var defaults={pageSize:25,pageNumber:1,filter:'',orderDirection:'Ascending',orderBy:'Username',userGroups:[],userStates:[]};if(options===undefined){options={};}
angular.extend(defaults,options);options=defaults;if(options.orderDirection==='asc'){options.orderDirection='Ascending';}else if(options.orderDirection==='desc'){options.orderDirection='Descending';}
var params={pageNumber:options.pageNumber,pageSize:options.pageSize,orderBy:options.orderBy,orderDirection:options.orderDirection,filter:options.filter};var qry=umbRequestHelper.dictionaryToQueryString(params);if(options.userGroups.length>0){qry+='&userGroups='+options.userGroups.join('&userGroups=');}
if(options.userStates.length>0){qry+='&userStates='+options.userStates.join('&userStates=');}
return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('userApiBaseUrl','GetPagedUsers',qry)),'Failed to retrieve users paged result');}
function getUser(userId){return umbRequestHelper.resourcePromise($http.get(umbRequestHelper.getApiUrl('userApiBaseUrl','GetById',{id:userId})),'Failed to retrieve data for user '+userId);}
function createUser(user){if(!user){throw'user not specified';}
var formattedSaveData=umbDataFormatter.formatUserPostData(user);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostCreateUser'),formattedSaveData),'Failed to save user');}
function inviteUser(user){if(!user){throw'user not specified';}
var formattedSaveData=umbDataFormatter.formatUserPostData(user);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostInviteUser'),formattedSaveData),'Failed to invite user');}
function saveUser(user){if(!user){throw'user not specified';}
var formattedSaveData=umbDataFormatter.formatUserPostData(user);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostSaveUser'),formattedSaveData),'Failed to save user');}
function changePassword(changePasswordModel){if(!changePasswordModel){throw'password model not specified';}
var formattedPasswordData=umbDataFormatter.formatChangePasswordModel(changePasswordModel);return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostChangePassword'),formattedPasswordData),'Failed to save user');}
function deleteNonLoggedInUser(userId){return umbRequestHelper.resourcePromise($http.post(umbRequestHelper.getApiUrl('userApiBaseUrl','PostDeleteNonLoggedInUser',{id:userId})),'Failed to delete the user '+userId);}
var resource={disableUsers:disableUsers,enableUsers:enableUsers,unlockUsers:unlockUsers,setUserGroupsOnUsers:setUserGroupsOnUsers,getPagedResults:getPagedResults,getUser:getUser,createUser:createUser,inviteUser:inviteUser,saveUser:saveUser,changePassword:changePassword,deleteNonLoggedInUser:deleteNonLoggedInUser,clearAvatar:clearAvatar};return resource;}
angular.module('umbraco.resources').factory('usersResource',usersResource);}());}());;