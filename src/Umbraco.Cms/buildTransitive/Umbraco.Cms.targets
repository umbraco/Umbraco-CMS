<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <SchemaFilePath>$(MSBuildThisFileDirectory)..\appsettings-schema.json</SchemaFilePath>
  </PropertyGroup>

  <Target Name="CopyUmbracoSchema" BeforeTargets="Build">
    <ItemGroup>
      <SchemaFile Include="$(SchemaFilePath)"/>
    </ItemGroup>

    <Message Text="Copying Umbraco json schema file" Importance="high"/>
    <Copy SourceFiles="@(SchemaFile)"
          DestinationFolder="$(MSBuildProjectDirectory)"
          SkipUnchangedFiles="true" />
  </Target>
  
  <Target Name="IncludeAppPluginsContent" BeforeTargets="GetCopyToOutputDirectoryItems;GetCopyToPublishDirectoryItems;">
    <ItemGroup>
        <_AppPluginsFiles Include="App_Plugins\**" />

        <ContentWithTargetPath
            Include="@(_AppPluginsFiles)"
            Exclude="@(ContentWithTargetPath)"
            TargetPath="%(Identity)"
            CopyToOutputDirectory="PreserveNewest"
            CopyToPublishDirectory="PreserveNewest"/>
    </ItemGroup>
  </Target>
</Project>
