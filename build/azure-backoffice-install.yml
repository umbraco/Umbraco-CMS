steps:
  - task: NodeTool@0
    displayName: Use Node.js $(nodeVersion)
    retryCountOnTaskFailure: 3
    inputs:
      versionSpec: $(nodeVersion)
  - task: Cache@2
    displayName: Cache node_modules
    inputs:
      key: '"npm_client" | "$(Agent.OS)"| $(Build.SourcesDirectory)/src/Umbraco.Web.UI.Client/package-lock.json'
      restoreKeys: |
        "npm_client" | "$(Agent.OS)"
        "npm_client"
      path: $(npm_config_cache)
  - script: npm ci --no-fund --no-audit --prefer-offline
    displayName: Run npm ci (Bellissima)
    workingDirectory: src/Umbraco.Web.UI.Client
